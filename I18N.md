# Internationalization (i18n) Setup Guide

This guide explains how to use the internationalization (i18n) system implemented with next-intl.

## Overview

The app supports 4 languages:

- **English** (en) - Default
- **Spanish** (es)
- **French** (fr)
- **German** (de)

## Supported Languages

Each language has a corresponding translation file in the `messages/` directory:

- `messages/en.json`
- `messages/es.json`
- `messages/fr.json`
- `messages/de.json`

## Configuration

The i18n configuration is located in `src/i18n.ts`:

```typescript
import { getRequestConfig } from "next-intl/server";

export const locales = ["en", "es", "fr", "de"] as const;
export type Locale = (typeof locales)[number];
```

## File Structure

```
kashcraft/
├── messages/
│   ├── en.json      # English translations
│   ├── es.json      # Spanish translations
│   ├── fr.json      # French translations
│   └── de.json      # German translations
└── src/
    └── i18n.ts      # i18n configuration
```

## Using Translations in Components

### Server Components

```tsx
import { getTranslations } from "next-intl/server";

export default async function Page() {
  const t = getTranslations();

  return (
    <div>
      <h1>{t("navigation.home")}</h1>
      <button>{t("common.addToCart")}</button>
    </div>
  );
}
```

### Client Components

```tsx
"use client";

import { useTranslations } from "next-intl";

export default function ProductCard() {
  const t = useTranslations();

  return (
    <div>
      <h2>{t("products.title")}</h2>
      <button>{t("common.addToCart")}</button>
      <p>{t("common.inStock")}</p>
    </div>
  );
}
```

## Translation structure

Translations are organized by namespace:

```json
{
  "navigation": {
    "home": "Home",
    "products": "Products"
  },
  "common": {
    "search": "Search",
    "filter": "Filter"
  },
  "products": {
    "title": "Products",
    "noProducts": "No products found"
  },
  "cart": {
    "title": "Shopping Cart"
  }
}
```

## Available Translation Keys

### Navigation Keys

- `navigation.home`
- `navigation.products`
- `navigation.categories`
- `navigation.about`
- `navigation.contact`
- `navigation.cart`
- `navigation.account`
- `navigation.logout`
- `navigation.login`
- `navigation.register`

### Common Keys

- `common.search`
- `common.filter`
- `common.sort`
- `common.price`
- `common.rating`
- `common.addToCart`
- `common.addToWishlist`
- `common.loading`
- `common.error`
- `common.success`

### E-Commerce Keys

- `products.title`
- `products.noProducts`
- `products.sortBy`
- `cart.title`
- `cart.empty`
- `checkout.title`
- `account.title`
- `account.dashboard`
- `account.orders`

### Auth Keys

- `auth.login`
- `auth.register`
- `auth.email`
- `auth.password`
- `auth.loginSuccess`
- `auth.registerSuccess`

### Message Keys

- `messages.welcome`
- `messages.addedToCart`
- `messages.removedFromCart`
- `messages.emptyCart`
- `messages.searchPlaceholder`
- `messages.contactEmail`
- `messages.contactPhone`

## Adding New Translations

1. Add the new key to all language files:

```json
// messages/en.json
{
  "navigation": {
    "newFeature": "New Feature"
  }
}

// messages/es.json
{
  "navigation": {
    "newFeature": "Nueva Característica"
  }
}

// messages/fr.json
{
  "navigation": {
    "newFeature": "Nouvelle Fonctionnalité"
  }
}

// messages/de.json
{
  "navigation": {
    "newFeature": "Neue Funktion"
  }
}
```

2. Use it in your component:

```tsx
const t = useTranslations();
return <p>{t("navigation.newFeature")}</p>;
```

## Language Switching

To implement language switching, you can create a language switcher component:

```tsx
"use client";

import { useRouter, usePathname } from "next/navigation";
import { locales } from "@/i18n";

export function LanguageSwitcher() {
  const router = useRouter();
  const pathname = usePathname();

  const handleChangeLanguage = (locale: string) => {
    // Remove current locale from pathname
    const pathWithoutLocale = pathname.replace(/^\/[a-z]{2}/, "");
    // Navigate to new locale
    router.push(`/${locale}${pathWithoutLocale}`);
  };

  return (
    <select onChange={(e) => handleChangeLanguage(e.target.value)}>
      {locales.map((locale) => (
        <option key={locale} value={locale}>
          {locale.toUpperCase()}
        </option>
      ))}
    </select>
  );
}
```

## Formatting

### Date Formatting

```tsx
import { useLocale } from "next-intl";

export function DateDisplay({ date }: { date: Date }) {
  const locale = useLocale();

  return <p>{date.toLocaleDateString(locale === "en" ? "en-US" : "es-ES")}</p>;
}
```

### Number Formatting

```tsx
import { useLocale } from "next-intl";

export function PriceDisplay({ price }: { price: number }) {
  const locale = useLocale();

  const formatted = new Intl.NumberFormat(
    locale === "en" ? "en-US" : locale === "es" ? "es-ES" : locale === "fr" ? "fr-FR" : "de-DE",
    {
      style: "currency",
      currency: "USD",
    }
  ).format(price);

  return <span>{formatted}</span>;
}
```

## Sharing Translations

Use the `useTranslations()` hook with namespaces:

```tsx
"use client";

import { useTranslations } from "next-intl";

export function ProductSection() {
  const t = useTranslations("products");

  return (
    <div>
      <h2>{t("title")}</h2>
      <p>{t("noProducts")}</p>
    </div>
  );
}
```

## Best Practices

1. **Namespace Keys**: Organize translations logically by sections
2. **Consistency**: Use the same key names across components
3. **Translation Coverage**: Ensure all languages have the same keys
4. **No Hardcoded Text**: Always use translation keys instead of hardcoded strings
5. **Context Information**: Provide context in key names (e.g., `cart.addToCart` vs `product.addToCart`)
6. **RTL Languages**: If adding RTL languages (Arabic, Hebrew), use next-intl's RTL support

## Deployment

When deploying, ensure:

1. Translation files are included in the build
2. Environment variables are set for the supported locales
3. Language detection is configured in your hosting platform
4. Default locale fallback is set to 'en'

## Troubleshooting

### Missing Translations

If a key is not translated, next-intl will show a warning in development. Ensure the key exists in all language files.

### Wrong Language Display

Check that the `lang` attribute in your HTML is set correctly for SEO:

```tsx
export async function generateStaticParams() {
  return locales.map((locale) => ({ locale }));
}
```

## Support

For more information about next-intl:

- Documentation: https://next-intl-docs.vercel.app
- GitHub: https://github.com/amannn/next-intl
